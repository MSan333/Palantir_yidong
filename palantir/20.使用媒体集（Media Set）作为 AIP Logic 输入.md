在 Palantir Foundry 中，**AIP Logic** 允许开发者利用多模态模型对图像等非结构化数据执行推理任务 [1]。以下是使用媒体集（Media Set）作为 AIP Logic 输入的详细实现流程：

### 1. 数据准备与本体建模
*   **创建媒体集：** 首先需将图像（如 JPEG 格式）上传到 Foundry 并保存为**媒体集（Media Set）**，这是存储图片、PDF 和录音等非结构化数据的专用方式 [2, 3]。
*   **转换为数据集：** 在 Pipeline Builder 中，使用 **"Convert media set to table rows"** 转换插件，将媒体集转为包含**媒体引用（Media Reference）**列的表格数据集 [4]。媒体引用是一种特殊指针，允许在平台各处引用媒体文件而无需重复存储 [3]。
*   **配置属性：** 在本体管理器（Ontology Manager）中创建对象类型，并将存放图像的属性类型设置为**媒体引用**，同时必须将其手动映射到对应的基础媒体集 [5, 6]。
*   **启用编辑：** 确保为该对象类型开启 **"Allow Edits"** 选项，以便后续通过应用程序进行交互和实时更新 [7]。

### 2. 构建 AIP Logic 推理函数
*   **输入设置：** 由于 AIP Logic 目前没有直接的“媒体引用”输入类型，开发者应添加一个 **"Object"（对象）** 类型的函数输入 [8, 9]。
*   **引用媒体属性：** 在 **Use LLM 模块**的任务提示词（Task Prompt）中，输入正斜杠（`/`）并从输入对象中选择**媒体引用属性**，从而将图像上下文传递给多模态模型 [9]。
*   **定义任务：** 系统提示词（System Prompt）应描述模型的目标，例如“负责识别杂货篮图像中的物品” [9]。模型运行后会返回描述图像内容的字符串 [9]。

### 3. 创建交互操作 (Action)
*   为了实现用户上传图像并立即触发推理，需要创建一个 **"Create Object"** 类型的操作 [7, 10]。
*   由于属性已被定义为媒体引用，Foundry 会在操作表单中自动生成一个**文件上传接口**，支持用户上传图像文件 [10]。

### 4. 应用程序集成 (Workshop)
*   **上传组件：** 在 Workshop 应用中添加 **Inline Action Form** 组件，并绑定上述创建的操作，用于处理图像上传 [10, 11]。
*   **展示 AI 结果：** 添加 **AIP Generated Content** 窗口，将其绑定到已发布的 AIP Logic 函数 [11]。
*   **实现联动：** 将 Inline Action Form 输出的**对象集变量**连接到 AIP Logic 函数的输入参数 [11, 12]。当用户点击提交并运行 LLM 时，系统会实时处理上传的图像并返回识别结果 [12]。

通过这一工作流，用户可以构建出如“杂货篮物品识别”或“设备维修图像分类”等**基于实时媒体输入**的智能应用程序 [1, 12]。
