# Palantir Foundry 快速参考指南

> 针对不同角色的快速查询手册 - 适合日常参考

---

## 🎯 按角色快速导航

### 数据分析师
**常用工具**：Quiver, Contour, Notepad

| 需求 | 工具 | 步骤 | 时间 |
|------|------|------|------|
| 快速分析原始数据 | Contour | 选数据集 → 过滤 → 图表 | 5-10分 |
| 时间序列分析 | Quiver | 对象集 → 聚合 → 可视化 | 10-20分 |
| 生成分析报告 | Notepad | 嵌入组件 → 写文字 → 分享 | 15-30分 |
| 创建可复用计算 | Quiver Visual Function | 建分析 → 选输入输出 → 发布 | 20-30分 |

**常见问题**：
- Q: 如何快速查询？
  A: 使用Contour的SQL表达式板，支持Spark SQL窗口函数

- Q: 分析结果如何保存？
  A: 自动保存，无需手动。修改后Ctrl+S确保保存

- Q: 如何与他人共享分析？
  A: Notepad嵌入图表 → 设置权限 → 分享链接

---

### 数据工程师
**常用工具**：Pipeline Builder, Code Repositories, Data Connection

| 需求 | 工具 | 步骤 |
|------|------|------|
| 构建ETL管道 | Pipeline Builder | 数据源 → 转换 → 发布 |
| 高级转换逻辑 | Code Repositories | Python/PySpark代码 → 装饰器 → 提交PR |
| 连接新数据源 | Data Connection | 创建Source → 配置Sync → 测试 |
| 监控数据质量 | Data Lineage + Job Tracker | 查看血缘 → 监控构建 → 告警 |

**最佳实践**：
- 总是在Feature Branch开发，不直接修改Main
- Pipeline需要单元测试确保逻辑正确
- 使用参数而非硬编码常量
- 为关键Transform添加数据质量检查

**常见问题**：
- Q: Pipeline卡住了怎么办？
  A: 查看Job Tracker详细日志，通常是数据源问题或内存溢出

- Q: 如何测试Pipeline？
  A: 先构建子集数据验证，再全量部署

---

### 应用开发者（低代码）
**常用工具**：Workshop, Ontology Manager

| 需求 | 工具 | 步骤 |
|------|------|------|
| 创建业务应用 | Workshop | 添加组件 → 绑定数据 → 配置Action |
| 定义业务操作 | Ontology Manager | ActionType → 参数定义 → 回写规则 |
| 构建表单 | Workshop | 输入字段 → 验证规则 → 提交Button |
| 条件显示 | Workshop | 可视化条件 → if/then/else逻辑 |

**设计原则**：
- 遵循单一职责：一个应用解决一个业务问题
- 信息架构清晰：用户能快速找到需要的功能
- 反馈及时：操作后立即显示结果

**常见问题**：
- Q: 如何让表格数据与过滤器联动？
  A: 创建ObjectSet变量 → 过滤器更新变量 → 表格绑定变量

- Q: 如何执行复杂业务逻辑？
  A: 在Ontology Manager定义Action，包含验证与后续操作

---

### 业务用户（最终用户）
**常用工具**：Workshop, Object Explorer, Notepad

| 需求 | 操作 | 预期结果 |
|------|------|---------|
| 查看KPI | 打开应用 → 查看卡片 | 实时指标 |
| 查询数据 | 使用过滤器 | 相关数据筛选 |
| 执行操作 | 点Action按钮 | 数据更新 + 后续流程触发 |
| 生成报告 | 点报告按钮 | PDF或Email |

**无需了解的细节**：
- 数据从何来（信任平台）
- 如何计算的（相信结果准确）
- 底层架构（使用即可）

---

## 🔧 常用操作速查表

### 数据查询与分析

#### **场景1：我想快速查看某个数据集的分布**
```
步骤：
1. 进入应用 → 选"Analytics" → 点"Analyze in Contour"
2. 添加Chart卡板 → 选数据集和字段
3. 配置X轴（分组维度）和Y轴（度量）
4. 查看结果

预期时间：3-5分钟
```

#### **场景2：我需要对时间序列数据进行高级分析**
```
步骤：
1. 打开Quiver应用
2. 添加Object Set（如Sales订单）
3. 添加Filter卡板筛选数据
4. 添加Aggregation卡板按月/周聚合
5. 添加Numeric Formula卡板计算同比/环比
6. 可视化结果

预期时间：15-30分钟
```

#### **场景3：我需要生成周报告并发送给团队**
```
步骤：
1. 新建Notepad文档
2. 嵌入相关Quiver图表和Contour板
3. 添加文字说明和结论
4. 使用AIP优化语言（可选）
5. 发布文档版本
6. 创建Automate任务发送周报

预期时间：20-40分钟（首次）
```

---

### 应用操作

#### **场景1：我想基于筛选条件执行批量操作**
```
步骤：
1. 打开Workshop应用
2. 使用过滤器筛选符合条件的对象
3. 在表格中多选对象（支持全选）
4. 点击Action按钮（如"批量分配"）
5. 填写参数（如分配给谁）
6. 确认执行

预期时间：2-5分钟
```

#### **场景2：我想查看某个对象的完整信息及历史**
```
步骤：
1. Object Explorer → 搜索对象
2. 点击对象 → 打开Object View
3. 查看：属性、关联对象、历史版本、操作记录
4. 可在此界面执行Action

预期时间：1-3分钟
```

---

### 数据管理

#### **场景1：我需要接入一个新的数据源**
```
步骤（数据工程师）：
1. Data Connection → 创建Source
2. 选择连接类型（REST/Database/Agent等）
3. 填入认证信息（从密钥管理器获取）
4. 配置Sync规则（快照/增量/流式）
5. 测试连接 → 部署

预期时间：30分钟-2小时
```

#### **场景2：我需要验证数据质量**
```
步骤：
1. Data Lineage → 选择数据集
2. 查看来源、转换历史、健康状态
3. 点击"Data Health Checks" → 查看异常
4. 如有问题 → 创建Issue分派给团队

预期时间：5-10分钟
```

---

## 📊 工具选择速查表

### 选择分析工具

```
             是否原始数据？
            /            \
          YES             NO
           /               \
    是否需要SQL表达式？    是否时间序列优化？
    /                /         \
  YES             NO           YES    NO
   |              |             |     |
CONTOUR      CONTOUR          QUIVER CONTOUR
SQL板         点选模式        或Quiver 点选
                             + Dashboard
```

### 选择应用工具

```
             应用复杂度
            /         \
          低          高
          |            |
    是否需要      是否需要
    本体操作？    高定制化？
    /      \     /       \
   YES     NO  YES       NO
    |      |   |         |
Workshop Contour Slate  Workshop
          仪表板
```

---

## ⚡ 性能优化速查表

| 问题 | 症状 | 解决方案 | 预期效果 |
|------|------|---------|---------|
| 查询慢 | 加载>5s | 添加过滤器缩小数据量 | 减少50-80% |
| 查询慢 | 加载>5s | 使用参数化仪表盘 | 缓存结果 |
| 应用卡顿 | UI响应延迟 | 使用延迟加载（分页） | 立即可交互 |
| 内存溢出 | Pipeline失败 | 添加过滤器减少数据量 | 完成处理 |
| 成本高 | 每月账单$10k+ | 实施数据分层策略 | 节省30% |

---

## 🚀 快速起步路线图

### 第1周：基础概念
- [ ] 理解三层架构（数据层、本体层、应用层）
- [ ] 浏览现有应用（学习设计模式）
- [ ] 完成"Hello World"分析（在Contour中）

### 第2周：数据集成
- [ ] 配置Data Connection连接一个新源
- [ ] 在Pipeline Builder中做简单转换
- [ ] 验证输出数据质量

### 第3周：应用开发
- [ ] 在本体中创建简单对象类型
- [ ] 在Workshop中构建基础应用（表+过滤器）
- [ ] 添加一个简单Action

### 第4周：高级功能
- [ ] 创建Visual Function进行复杂计算
- [ ] 构建Notepad报告
- [ ] 配置自动分发

### 第5周+：深化应用
- [ ] 集成AIP（AI功能）
- [ ] 优化性能（缓存、索引）
- [ ] 扩展到新部门

---

## 🎓 学习资源

### 官方资源
- Palantir Academy（在线课程）
- Palantir Community（论坛）
- Internal Documentation（内部wiki）

### 推荐学习路径
1. **基础** → 官方入门教程（2-3小时）
2. **实战** → 构建小项目（1-2周）
3. **进阶** → 深度主题培训（3-5天）
4. **精通** → 复杂场景设计（持续）

### 重点掌握的技能
| 级别 | 必学 | 推荐 | 可选 |
|------|------|------|------|
| 初级 | Contour基础 | Workshop基础 | Notepad |
| 中级 | Pipeline Builder | Workshop高级 | Code Workspaces |
| 高级 | 本体设计 | Code Repositories | AIP Logic |

---

## 🆘 故障排查

### 应用无法加载
```
检查清单：
[ ] 是否有对象查看权限？（权限检查）
[ ] 对象是否有数据？（查看源数据集）
[ ] Pipeline是否运行失败？（查看Job Tracker）
[ ] 浏览器缓存清除？（Ctrl+Shift+Del）
```

### 数据查询超时
```
检查清单：
[ ] 数据量是否过大？（>100M行）→ 添加过滤器
[ ] Join是否过多？→ 简化查询
[ ] 是否使用了复杂表达式？ → 使用预聚合
[ ] 是否其他用户在占用资源？ → 询问管理员
```

### Action执行失败
```
检查清单：
[ ] 是否有执行权限？（权限检查）
[ ] 是否参数填写错误？（检查参数）
[ ] 是否对象状态不允许操作？（查看对象状态）
[ ] Action定义是否正确？（查看Action配置）
```

### 权限问题
```
检查清单：
[ ] 用户是否在correct group中？
[ ] 对象/属性是否有权限？
[ ] 是否需要申请权限？（向管理员申请）
[ ] 权限是否已刷新？（重新登录）
```

---

## 📞 获取帮助

### 内部支持
- **Slack频道**：#palantir-support
- **邮件**：palantir-team@company.com
- **Wiki**：internal-docs.company.com/palantir

### 外部支持
- **Palantir Support Portal**：支持票系统
- **社区论坛**：Palantir Community
- **培训服务**：Palantir Professional Services

### 提问模板
```
问题标题：[简明扼要]

症状描述：
- 操作步骤
- 预期结果
- 实际结果
- 错误信息

环境信息：
- 使用工具（如Workshop）
- 数据集名称
- 用户角色
- 浏览器版本

已尝试方案：
- [ ] 清除浏览器缓存
- [ ] 重新登录
- [ ] 查看文档

预期解决时间：[紧急/普通/可延迟]
```

---

## 📈 关键指标监控

### 应该定期检查的指标

| 指标 | 正常范围 | 警告值 | 严重值 |
|------|---------|--------|--------|
| Pipeline成功率 | >99% | 95-99% | <95% |
| 查询响应时间 | <1s | 1-5s | >5s |
| 数据新鲜度 | <1h | 1-6h | >6h |
| 应用可用性 | >99.5% | 95-99.5% | <95% |
| 用户活跃度 | >80% | 50-80% | <50% |
| 存储使用率 | <70% | 70-85% | >85% |

---

## ✅ 最佳实践清单

- [ ] 定期备份重要配置
- [ ] 使用版本控制管理Pipeline代码
- [ ] 为关键对象配置条件格式化
- [ ] 实施数据分层策略降低成本
- [ ] 定期审查权限确保安全
- [ ] 监控数据质量问题
- [ ] 文档化关键应用逻辑
- [ ] 定期进行灾备演练
- [ ] 收集用户反馈持续改进
- [ ] 建立知识共享机制

---


